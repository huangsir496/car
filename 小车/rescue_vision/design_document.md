技术要求
python 3.8
opencv-python 4.5.5.64
numpy 1.21.5
serial 3.4


流程为：
选择队伍的颜色--初始化摄像头--获取串口信息--根据颜色选择对应的处理函数--处理图像--发送距离和角度到电控系统

整体思路
先用camera_capture.py初始化摄像头，参数调用在config.py中的设置
在main中打开串口接收信息解码，然后选择对应的处理函数进行识别操作，通过object_detection.py中的函数进行处理
最后将距离和角度通过串口发送给电控系统,距离在object_detection.py中通过像素-图像， 利用反比关系计算到中心的距离,角度这里认为只用水平角度表示即可然后以[]发送给电控系统，中间用“,”隔开


其中object_detection.py负责颜色检测，球体检测，距离计算   是关键的代码
- 基于球体在图像中的像素直径与实际距离成反比的关系
- 使用 pixel_distance_scale（缩放因子）和 pixel_distance_offset（偏移量）进行校准
- 过滤过小的检测结果和超出合理范围的距离
- 通过实际测试校准缩放因子，实现无需相机内参的距离计算
- 颜色检测使用HSV，通过调整参数实现对不同颜色的检测，具体的测试代码在test_color_detection.py
- 球体检测使用形态学操作，通过调整参数实现对不同大小的球体的检测，具体的测试代码在test_ball_detection.py，里面还附加了距离检查和角度计算，同时运用高斯滤波和颜色阈值分割提高了准确性



主要的代码难点
- 在于颜色检测和距离计算，需要根据实际情况调整参数，同时考虑到实时性，需要在短时间内完成检测和计算，还要保证他不会因为计算量过大而导致延迟
其中最为重要的就是object_detection.py中的颜色检测和距离计算函数，
需要根据实际情况调整参数，参数的测试需要通过代码在实验室实际测量，一开始我使用了焦距法的相似三角形原理测量但是那个焦距一直调不对，结果并不是很理想，后面发现可以运用像素-图像的关系直接计算距离，效果也不错，至少避开了焦距测量的问题（每次测出来都是不一样的）
- 还有就是图传功能，我在使用图传的过程中由于我的三脚猫功夫遇到了很多问题，最后还是请教了学长，才解决了很多问题，最终实现了图传功能，可是后面发现图传功能并不理想，很多时候会出现丢帧的情况，导致距离和角度的计算不准确和串口乱码初始化错误，还一度让我怀疑是我代码的问题，最后才发现是图传的问题，尝试建立缓冲区但是效果仍旧不理想，删了就没问题了
- 最重要的一点就是树莓派的问题，树莓派老是莫名其妙连接不上，不断重启也没有效果，只好重新烧录，这是考核最后一个星期才出现的情况，导致非常！非常！我和电控的测试
并且由于我的自大没有给代码进行有效的备份，只好重写重调，吸取教训后马上创建了仓库来保存我写好的代码，可是我不断烧录重启树莓派到今天写这份文档的时候还是没有修好，时间紧迫，我们小组只好启动死代码模式，我很愧疚也很崩溃，但也只能接受这个结果用尽自己的全力比赛
- 
