
# 相机参数配置
# 配置方法：
# - resolution：根据实际相机能力和性能需求调整，分辨率越低性能越好
# - horizontal_fov：水平视场角，通常在60-70度之间，可通过相机参数获取或实际测量
# - vertical_fov：垂直视场角，通常与水平视场角成比例（基于分辨率比例）
# 注意：不再需要焦距配置，现在使用像素-距离的反比关系计算距离
CAMERA_CONFIG = {
    "resolution": (640, 480),  # 相机分辨率
    "horizontal_fov": 60,       # 水平视场角（度）
    "vertical_fov": 45,         # 垂直视场角（度）
               }

# 目标参数配置
# 配置方法：
# - known_ball_diameter：测量实际目标球的直径
# - min_contour_area：根据相机分辨率和目标大小调整，过滤小噪声
# - circularity_threshold：调整圆形度阈值以平衡检测率和准确性
TARGET_CONFIG = {
    "known_ball_diameter": 40,  # 已知球体直径（mm），配置方法：使用卡尺测量实际球的直径
    "min_contour_area": 20,     # 最小轮廓面积（像素），配置方法：在目标最小距离下测试并调整，过滤噪点
    "circularity_threshold": 0.65, # 圆形度阈值，配置方法：范围0-1，值越大越严格要求圆形，推荐0.6-0.8
}

# 颜色HSV阈值配置
# 配置方法：
# 1. 使用HSV颜色选择器工具在实际环境下测试目标颜色
# 2. 调整H(色相), S(饱和度), V(明度)的最小值和最大值
# 3. 注意红色在HSV空间中是环形的，需要两个范围
# 4. 环境光线变化时需要重新调整
COLOR_RANGES = {
    "red": [0, 153, 77, 11, 255, 255, 150, 30, 50, 180, 255, 255],  # red目标，配置方法：在实际环境下调整H值
    "blue": [88, 146, 61, 179, 255, 255],  # blue目标，配置方法：在实际环境下调整H值
    "black": [(0, 0, 0), (179, 255, 46)],  # black目标，配置方法：在实际环境下调整H值
    "yellow": [19, 111, 78, 63, 237, 226],  # yellow目标，配置方法：在实际环境下调整H值
    "white": [(0, 0, 200), (180, 255, 255)],  # white目标，配置方法：在实际环境下调整H值
}

# 电控系统通信配置
# 配置方法：
# 1. 根据实际使用的通信方式选择protocol
# 2. 串口模式下，树莓派上串口通常为"/dev/ttyUSB0"或"/dev/ttyACM0"
# 3. 网络模式下，需要配置正确的IP地址和端口
# 4. 通信参数必须与电控系统保持一致
ELECTRONIC_CONTROL_CONFIG = {
    "enabled": True,            # 是否启用电控通信，配置方法：True启用，False禁用
    "protocol": "serial",      # 通信协议：serial（串口）或network（网络），配置方法：根据硬件连接方式选择
    "serial_port": "/dev/ttyS0", # 默认串口，配置方法：树莓派上通常为"/dev/ttyUSB0"或"/dev/ttyACM0"
    "baud_rate": 9600,        # 串口波特率，配置方法：必须与电控系统设置一致
    "network_ip": "127.0.0.1", # 网络IP地址，配置方法：设置为电控系统的IP
    "network_port": 45294,      # 网络端口，配置方法：设置为电控系统的端口
    "send_interval": 0.1,       # 数据发送间隔（秒），配置方法：根据实时性需求调整，默认0.1秒
    "auto_detect_port": True,   # 自动端口检测，配置方法：True自动查找可用端口，False使用指定端口
    "max_retries": 3,           # 通信重试次数，配置方法：设置通信失败时的重试次数
    "reconnect_interval": 1,    # 重连间隔（秒），配置方法：设置断开后的重连等待时间
}

# 视觉处理配置
# 配置方法：
# 1. 性能优化：降低分辨率、减小内核大小、减少迭代次数可以提高性能
# 2. 检测质量：增加内核大小、调整迭代次数可以改善检测质量
# 3. 调试模式：开发时启用，部署时建议关闭以提高性能
VISION_CONFIG = {
    "display_result": True,     # 是否显示处理结果，配置方法：True显示实时图像，False不显示可提高性能
    "debug_mode": True,         # 是否启用调试模式，配置方法：True输出详细信息，False静默运行
    "morph_kernel_size": (5, 5), # 形态学处理内核大小，配置方法：(3,3)轻量处理，(5,5)标准，(7,7)强力
    "erode_iterations": 1,      # 腐蚀迭代次数，配置方法：增加可去除小噪声，但会缩小目标
    "dilate_iterations": 2,     # 膨胀迭代次数，配置方法：增加可连接断开的轮廓，使目标更完整
    "gaussian_blur_ksize": (5, 5), # 高斯滤波内核大小，配置方法：必须为奇数，值越大模糊效果越强
    "gaussian_blur_sigma": 0,   # 高斯滤波标准差，配置方法：0自动计算，或手动设置正数
}

# 安全区检测配置
# 配置方法：
# 1. 根据实际安全区的形状特征调整长宽比范围
# 2. 在实际环境下拍摄安全区样本进行测试和校准
# 3. 调整阈值使系统能够准确识别真实的安全区
SAFE_ZONE_CONFIG = {
    "aspect_ratio_min": 2,      # 最小长宽比
    "aspect_ratio_max": 4,      # 最大长宽比
    "min_area": 500,            # 最小面积（像素）
    "max_area": 50000,          # 最大面积（像素）
}